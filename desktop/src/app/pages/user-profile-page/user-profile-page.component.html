<div class="encapsulating-div mat-app-background">
    <app-header></app-header>

    <mat-drawer-container>
        <mat-card class="user-info justified">
            <div class="justified">
                <h2 *ngIf="userService.isConnected.getValue()">{{ userService.user.username }}</h2>
                <img
                    *ngIf="userService.isConnected.getValue()"
                    [src]="userService.user.profilePicture.key"
                    class="selector-avatar mat-elevation-z5"
                    alt="profile picture"
                />
                <button mat-button color="primary" (click)="redirectSettingsPage()">
                    <mat-icon>settings</mat-icon>
                    <!-- TODO : Language-->
                    Settings
                </button>
            </div>
            <mat-divider style="width: 90%"></mat-divider>
            <div class="user-stats">
                <div class="justified">
                    <!-- TODO : Language-->
                    <h4>Stastiques</h4>
                    <!-- TODO : Language-->
                    <div>Temps moy : {{ userStats?.averageGameTime }}</div>
                    <!-- TODO : Language-->
                    <div>Score moy : {{ userStats?.averageGameScore }}</div>
                    <!-- TODO : Language-->
                    <div>Jeux joués : {{ userStats?.gameCount }}</div>
                    <canvas #myChart width="160" height="160"></canvas>
                    <!-- TODO : Language-->
                    <div #newUser *ngIf="playerHasntPlayed()">L'utilisateur n'a pas encore joué de parties</div>
                </div>
                <mat-divider vertical></mat-divider>
                <div class="justified">
                    <!-- TODO : Language-->
                    <h4>Historique</h4>
                    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
                        <mat-tab label="Parties">
                            <mat-list>
                                <div *ngFor="let game of games">
                                    <mat-list-item>
                                        <div id="list-item-content">
                                            <!-- TODO: language -->
                                            <span *ngIf="game.gameWon" style="color: green">Victoire</span>
                                            <span *ngIf="!game.gameWon" style="color: red">Défaite</span>

                                            <span>{{ game.date }}</span>
                                        </div>
                                    </mat-list-item>
                                    <mat-divider></mat-divider>
                                </div>
                            </mat-list>
                        </mat-tab>
                        <mat-tab label="Connexions">
                            <mat-list>
                                <div *ngFor="let connection of connections">
                                    <mat-list-item>
                                        <div id="list-item-content">
                                            <!-- TODO: language -->
                                            <span>{{ connection.event }}</span>
                                            <span>{{ connection.date }}</span>
                                        </div>
                                    </mat-list-item>
                                    <mat-divider></mat-divider>
                                </div>
                            </mat-list>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>
        </mat-card>
    </mat-drawer-container>

    <app-footer></app-footer>
</div>
