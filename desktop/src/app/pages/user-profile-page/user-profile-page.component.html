<div class='encapsulating-div mat-app-background'>
    <app-header></app-header>

    <mat-drawer-container>

<!--    <div class='mat-app-background'>-->
        <mat-card class='user-info justified'>
            <div class='justified'>
                <h2 *ngIf='userService.isConnected.getValue()'>{{ userService.user.username }}</h2>
                <img
                    *ngIf='userService.isConnected.getValue()'
                    [src]='userService.user.profilePicture.key'
                    class='selector-avatar mat-elevation-z5'
                    alt='profile picture'
                />
                <button mat-button color='primary' (click)='redirectSettingsPage()'>
                    <mat-icon>settings</mat-icon>
                    <!-- TODO : Language-->
                    Settings
                </button>
            </div>
            <mat-divider style='width: 90%'></mat-divider>
            <div class='user-stats'>
                <div class='justified' style='height: 90%'>
                    <!-- TODO : Language-->
                    <h4>Stastiques</h4>
                    <!-- TODO : Language-->
                    <div>Temps moy : {{ userStats?.averageGameTime }}</div>
                    <!-- TODO : Language-->
                    <div>Score moy : {{ userStats?.averageGameScore }}</div>
                    <!-- TODO : Language-->
                    <div>Jeux joués : {{ userStats?.gameCount }}</div>
                    <canvas #myChart width='160' height='160'></canvas>
                    <!-- TODO : Language-->
                    <div #newUser *ngIf='playerHasntPlayed()'>L'utilisateur n'a pas encore joué de
                        parties
                    </div>
                </div>
                <mat-divider vertical></mat-divider>
                <div class='justified'>
                    <!-- TODO : Language-->
                    <h4>Historique</h4>
                    <mat-tab-group mat-stretch-tabs='false' mat-align-tabs='start'>
                        <mat-tab label='Parties'>
                            <mat-list *ngFor='let game of games'>
                                <mat-list-item>
                                    <mat-panel-title>
                                        <div *ngIf='game.gameWon' style='color: green'>
                                            <!-- TODO: language -->
                                            <p>Victoire</p>
                                            <p>{{ game.date }}</p>
                                        </div>
                                        <div *ngIf='!game.gameWon' style='color: red'>
                                            <!-- TODO : Language-->
                                            <p>Défaite</p>
                                            <p>{{ game.date }}</p>
                                        </div>
                                    </mat-panel-title>
                                </mat-list-item>
                            </mat-list>
                        </mat-tab>
                        <mat-tab label='Connexions'>
                            <mat-expansion-panel role='list'>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        <!-- TODO: language -->
                                        <div>Status</div>
                                        <!-- TODO : Language-->
                                        <div>Date</div>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <p>
                                    <!-- TODO: language -->
                                </p>
                            </mat-expansion-panel>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>
        </mat-card>
<!--    </div>-->
    </mat-drawer-container>

    <app-footer></app-footer>
</div>
